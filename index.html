    <!DOCTYPE html>  
    <html lang="en">  
    <head>  
        <meta charset="UTF-8">  
        <title>js生成二维码</title>  
        <script src="qrcode.js"></script>  
    </head>  
    <body>  
    <div id="qrcode" style="margin:auto; position: absolute;left: 40%;top:10%;">  
    </div>
      
    <input type="hidden" id="getval" value="http://blog.csdn.net/dcx_abc"/>  

   <a id="downloadLink"></a>
   <button type="button" onclick="downloadClick()">下载</button>
    <script>  
        var qrcode = new QRCode(document.getElementById("qrcode"), {  
            width : 300,//设置宽高  
            height : 300, //设置颜色 
            colorDark : 'red', 
            colorLight : '#ffffff',   
        });  
            document.getElementById("getval").onclick =function(){  
            qrcode.makeCode(document.getElementById("getval").value);  
        };  
      
        qrcode.makeCode(document.getElementById("getval").value);  

         //js
  function downloadClick () {
    // 获取base64的图片节点
    var img = document.getElementById('qrcode').getElementsByTagName('img')[0];
    // 构建画布
    var canvas = document.createElement('canvas');
    canvas.width = img.width;
    canvas.height = img.height;
    canvas.getContext('2d').drawImage(img, 0, 0);
    // 构造url
    url = canvas.toDataURL('image/png');
    // 构造a标签并模拟点击
    var downloadLink = document.getElementById('downloadLink');
    downloadLink.setAttribute('href', url);
    downloadLink.setAttribute('download', '二维码.png');
    downloadLink.click();
  }
    </script>  
    </body>  
    </html>  